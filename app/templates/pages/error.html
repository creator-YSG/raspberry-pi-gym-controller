{% extends "layouts/base.html" %}

{% block title %}ì˜¤ë¥˜{% endblock %}

{% block body_class %}error-page{% endblock %}

{% block content %}
<div class="error-container">
    <!-- ì—ëŸ¬ ì•„ì´ì½˜ -->
    <div class="error-animation">
        {% if error_type == 'member_not_found' %}
        <div class="error-icon">âŒ</div>
        <h1 class="error-title">ë“±ë¡ë˜ì§€ ì•Šì€ íšŒì›ì…ë‹ˆë‹¤</h1>
        
        {% elif error_type == 'member_expired' %}
        <div class="error-icon">â°</div>
        <h1 class="error-title">íšŒì›ê¶Œì´ ë§Œë£Œë˜ì—ˆìŠµë‹ˆë‹¤</h1>
        
        {% elif error_type == 'access_denied' %}
        <div class="error-icon">ğŸš«</div>
        <h1 class="error-title">ì´ êµ¬ì—­ì„ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤</h1>
        
        {% elif error_type == 'locker_occupied' %}
        <div class="error-icon">ğŸ”’</div>
        <h1 class="error-title">ì´ë¯¸ ëŒ€ì—¬ ì¤‘ì¸ ë½ì»¤ì…ë‹ˆë‹¤</h1>
        
        {% elif error_type == 'no_available_lockers' %}
        <div class="error-icon">ğŸ“­</div>
        <h1 class="error-title">ì‚¬ìš© ê°€ëŠ¥í•œ ë½ì»¤ê°€ ì—†ìŠµë‹ˆë‹¤</h1>
        
        {% elif error_type == 'already_rented' %}
        <div class="error-icon">âš ï¸</div>
        <h1 class="error-title">ì´ë¯¸ ë½ì»¤ë¥¼ ëŒ€ì—¬ ì¤‘ì…ë‹ˆë‹¤</h1>
        
        {% elif error_type == 'not_rented' %}
        <div class="error-icon">âš ï¸</div>
        <h1 class="error-title">ëŒ€ì—¬ ì¤‘ì¸ ë½ì»¤ê°€ ì—†ìŠµë‹ˆë‹¤</h1>
        
        {% elif error_type == 'wrong_locker' %}
        <div class="error-icon">âŒ</div>
        <h1 class="error-title">ì˜ëª»ëœ ë½ì»¤ì…ë‹ˆë‹¤</h1>
        
        {% elif error_type == 'system_error' %}
        <div class="error-icon">âš™ï¸</div>
        <h1 class="error-title">ì‹œìŠ¤í…œ ì˜¤ë¥˜</h1>
        
        {% else %}
        <div class="error-icon">â—</div>
        <h1 class="error-title">ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤</h1>
        {% endif %}
    </div>

    <!-- ì—ëŸ¬ ë©”ì‹œì§€ -->
    <div class="error-message">
        {% if error_message %}
        <p class="error-text">{{ error_message }}</p>
        {% else %}
        <p class="error-text">
            {% if error_type == 'member_not_found' %}
            íšŒì› ë“±ë¡ í›„ ì´ìš©í•´ì£¼ì„¸ìš”.
            {% elif error_type == 'member_expired' %}
            íšŒì›ê¶Œì„ ê°±ì‹ í•´ì£¼ì„¸ìš”.
            {% elif error_type == 'access_denied' %}
            ì‚¬ìš© ê¶Œí•œì´ ì—†ëŠ” êµ¬ì—­ì…ë‹ˆë‹¤.
            {% elif error_type == 'locker_occupied' %}
            ë‹¤ë¥¸ ë½ì»¤ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.
            {% elif error_type == 'no_available_lockers' %}
            ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.
            {% elif error_type == 'already_rented' %}
            ë¨¼ì € ë°˜ë‚©í•˜ì‹  í›„ ì´ìš©í•´ì£¼ì„¸ìš”.
            {% elif error_type == 'not_rented' %}
            ëŒ€ì—¬í•˜ì‹  ë½ì»¤ê°€ ì—†ìŠµë‹ˆë‹¤.
            {% elif error_type == 'wrong_locker' %}
            ë³¸ì¸ì´ ëŒ€ì—¬í•œ ë½ì»¤ë¥¼ ì‚¬ìš©í•´ì£¼ì„¸ìš”.
            {% elif error_type == 'system_error' %}
            ê´€ë¦¬ìì—ê²Œ ë¬¸ì˜í•´ì£¼ì„¸ìš”.
            {% else %}
            ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.
            {% endif %}
        </p>
        {% endif %}
    </div>

    <!-- ì•ˆë‚´ ë©”ì‹œì§€ -->
    {% if error_type in ['member_not_found', 'member_expired'] %}
    <div class="help-box">
        <p class="help-text">ğŸ“ ë¬¸ì˜: í—¬ìŠ¤ì¥ í”„ë¡ íŠ¸ ë°ìŠ¤í¬</p>
    </div>
    {% endif %}

    <!-- ìë™ ë³µê·€ ì•ˆë‚´ -->
    <div class="auto-return">
        <div class="countdown-circle countdown-error">
            <span class="countdown-number" id="countdown">5</span>
        </div>
        <p class="auto-return-text">ì´ˆ í›„ ìë™ìœ¼ë¡œ ëŒì•„ê°‘ë‹ˆë‹¤</p>
    </div>

    <!-- ìˆ˜ë™ ë³µê·€ ë²„íŠ¼ -->
    <button class="back-button" onclick="goHome()">
        <span class="back-icon">ğŸ </span>
        <span class="back-text">ì²˜ìŒìœ¼ë¡œ ëŒì•„ê°€ê¸°</span>
    </button>
</div>
{% endblock %}

{% block scripts %}
<script>
let countdownValue = 5;

document.addEventListener('DOMContentLoaded', function() {
    console.log('âŒ ì—ëŸ¬ í™”ë©´:', '{{ error_type }}');
    
    // ì¹´ìš´íŠ¸ë‹¤ìš´ ì‹œì‘
    const countdownInterval = setInterval(function() {
        countdownValue--;
        document.getElementById('countdown').textContent = countdownValue;
        
        if (countdownValue <= 0) {
            clearInterval(countdownInterval);
            goHome();
        }
    }, 1000);
});

function goHome() {
    window.location.href = '/';
}
</script>
{% endblock %}

