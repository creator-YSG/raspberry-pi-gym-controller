# ğŸ—ï¸ ë¼ì¦ˆë² ë¦¬íŒŒì´ í—¬ìŠ¤ì¥ ë½ì¹´í‚¤ ëŒ€ì—¬ê¸° ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

## ğŸ“‹ ì‹œìŠ¤í…œ ê°œìš”

ë¼ì¦ˆë² ë¦¬íŒŒì´ê°€ ì¤‘ì•™ ì œì–´ í—ˆë¸Œ ì—­í• ì„ í•˜ì—¬ ESP32 í—¬ìŠ¤ì¥ ì»¨íŠ¸ë¡¤ëŸ¬ì™€ JSON í†µì‹ í•˜ë©°, ì›¹ ê¸°ë°˜ í„°ì¹˜ìŠ¤í¬ë¦° GUIì™€ Google Sheets ì˜¤í”„ë¼ì¸ ë™ê¸°í™”ë¥¼ í†µí•´ ì™„ì „ ìë™í™”ëœ ë½ì¹´í‚¤ ëŒ€ì—¬/ë°˜ë‚© ì‹œìŠ¤í…œì„ ì œê³µí•©ë‹ˆë‹¤.

### âœ¨ ì£¼ìš” íŠ¹ì§•
- ğŸ” **ESP32 ìë™ ê°ì§€ ë° ì—°ê²°**: ë¶€íŒ…ì‹œ USB í¬íŠ¸ ìë™ ìŠ¤ìº”
- ğŸŒ **ì›¹ ê¸°ë°˜ í„°ì¹˜ UI**: 600x1024 ì„¸ë¡œ ëª¨ë“œ ìµœì í™”
- ğŸ“± **ì‹¤ì‹œê°„ í†µì‹ **: WebSocket ê¸°ë°˜ ì¦‰ì‹œ ì‘ë‹µ
- ğŸ“Š **ì˜¤í”„ë¼ì¸ ìš´ì˜**: Google Sheets ë¡œì»¬ ìºì‹œ í™œìš©
- âš™ï¸ **í•˜ë“œì›¨ì–´ í†µí•©**: ë°”ì½”ë“œ, IRì„¼ì„œ, ìŠ¤í…Œí¼ëª¨í„° ì™„ì „ ì œì–´

## ğŸ”§ í•˜ë“œì›¨ì–´ êµ¬ì„±

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    í—¬ìŠ¤ì¥ ë½ì¹´í‚¤ ëŒ€ì—¬ê¸° ì‹œìŠ¤í…œ                         â”‚
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ë¼ì¦ˆë² ë¦¬íŒŒì´ 4B â”‚â”€â”€â”€â”€â”‚     í„°ì¹˜ìŠ¤í¬ë¦° ëª¨ë‹ˆí„° (600x1024)       â”‚   â”‚
â”‚  â”‚   (ì¤‘ì•™ì œì–´)    â”‚HDMIâ”‚       ì›¹ ê¸°ë°˜ í‚¤ì˜¤ìŠ¤í¬ ëª¨ë“œ             â”‚   â”‚
â”‚  â”‚                 â”‚    â”‚     â€¢ ë°”ì½”ë“œ ìŠ¤ìº” UI                   â”‚   â”‚
â”‚  â”‚ â€¢ Flask ì›¹ì„œë²„  â”‚    â”‚     â€¢ ë½ì¹´ ì„ íƒ UI                     â”‚   â”‚
â”‚  â”‚ â€¢ ESP32 ìë™ê°ì§€â”‚    â”‚     â€¢ ì‹¤ì‹œê°„ ìƒíƒœ í‘œì‹œ                 â”‚   â”‚
â”‚  â”‚ â€¢ Google Sheets â”‚    â”‚     â€¢ WebSocket ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚           â”‚ WiFi (Google Sheets ë™ê¸°í™”)                               â”‚
â”‚           â”‚                                                           â”‚
â”‚           â”‚ USB ì‹œë¦¬ì–¼ í†µì‹  (ìë™ ê°ì§€)                               â”‚
â”‚           â”‚                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚              ESP32 í—¬ìŠ¤ì¥ í†µí•© ì»¨íŠ¸ë¡¤ëŸ¬                         â”‚ â”‚
â”‚  â”‚                                                                 â”‚ â”‚
â”‚  â”‚  â€¢ GM65 ë°”ì½”ë“œ ìŠ¤ìºë„ˆ (UART2: GPIO16/17)                       â”‚ â”‚
â”‚  â”‚  â€¢ MCP23017 IRì„¼ì„œ í™•ì¥ (I2C: GPIO21/22)                      â”‚ â”‚
â”‚  â”‚  â€¢ A4988 ìŠ¤í…Œí¼ëª¨í„° ì œì–´ (GPIO25/26/27)                       â”‚ â”‚
â”‚  â”‚  â€¢ LED/ë¶€ì € ì•Œë¦¼ (GPIO2/4)                                    â”‚ â”‚
â”‚  â”‚                                                                 â”‚ â”‚
â”‚  â”‚  [ìë™ ê°ì§€ USB VID:PID]                                       â”‚ â”‚
â”‚  â”‚  â€¢ CP2102: 10c4:ea60                                          â”‚ â”‚
â”‚  â”‚  â€¢ CH340G: 1a86:7523                                          â”‚ â”‚
â”‚  â”‚  â€¢ í¬íŠ¸: /dev/ttyUSB* (ìë™)                                  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ›ï¸ ì†Œí”„íŠ¸ì›¨ì–´ ì•„í‚¤í…ì²˜

### ğŸ“¦ ëª¨ë“ˆ êµ¬ì¡°

```
raspberry-pi-gym-controller/
â”œâ”€â”€ ğŸš€ run.py                     # ë©”ì¸ ì‹¤í–‰ íŒŒì¼ (Flask ì„œë²„ ì‹œì‘)
â”œâ”€â”€ ğŸ“± app/                       # Flask ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜
â”‚   â”œâ”€â”€ __init__.py              # ì•± íŒ©í† ë¦¬ (ESP32 ìë™ ì—°ê²° í¬í•¨)
â”‚   â”œâ”€â”€ main/                    # ë©”ì¸ ë¸”ë£¨í”„ë¦°íŠ¸
â”‚   â”‚   â””â”€â”€ routes.py           # í™ˆ, ë½ì¹´ì„ íƒ ë“± ë©”ì¸ ë¼ìš°íŠ¸
â”‚   â”œâ”€â”€ api/                     # API ë¸”ë£¨í”„ë¦°íŠ¸  
â”‚   â”‚   â””â”€â”€ routes.py           # REST API ì—”ë“œí¬ì¸íŠ¸
â”‚   â”œâ”€â”€ events.py               # WebSocket ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬
â”‚   â”œâ”€â”€ models/                 # ë°ì´í„° ëª¨ë¸
â”‚   â”‚   â”œâ”€â”€ member.py          # íšŒì› ëª¨ë¸
â”‚   â”‚   â”œâ”€â”€ locker.py          # ë½ì¹´ ëª¨ë¸
â”‚   â”‚   â””â”€â”€ rental.py          # ëŒ€ì—¬ ê¸°ë¡ ëª¨ë¸
â”‚   â”œâ”€â”€ services/               # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚   â”‚   â”œâ”€â”€ member_service.py  # íšŒì› ê´€ë¦¬ ì„œë¹„ìŠ¤
â”‚   â”‚   â”œâ”€â”€ locker_service.py  # ë½ì¹´ ê´€ë¦¬ ì„œë¹„ìŠ¤
â”‚   â”‚   â”œâ”€â”€ barcode_service.py # ë°”ì½”ë“œ ì²˜ë¦¬ ì„œë¹„ìŠ¤
â”‚   â”‚   â””â”€â”€ system_service.py  # ì‹œìŠ¤í…œ ê´€ë¦¬ ì„œë¹„ìŠ¤
â”‚   â”œâ”€â”€ templates/              # Jinja2 HTML í…œí”Œë¦¿
â”‚   â”‚   â”œâ”€â”€ layouts/base.html  # ê¸°ë³¸ ë ˆì´ì•„ì›ƒ (600x1024 ìµœì í™”)
â”‚   â”‚   â””â”€â”€ pages/home.html    # í™ˆ í™”ë©´ (í„°ì¹˜ ìµœì í™”)
â”‚   â”œâ”€â”€ static/                # ì •ì  íŒŒì¼
â”‚   â”‚   â”œâ”€â”€ css/               # ìŠ¤íƒ€ì¼ì‹œíŠ¸ (ì„¸ë¡œëª¨ë“œ + í„°ì¹˜)
â”‚   â”‚   â”œâ”€â”€ js/main.js         # JavaScript (WebSocket í¬í•¨)
â”‚   â”‚   â””â”€â”€ images/            # ì´ë¯¸ì§€ íŒŒì¼
â”‚   â””â”€â”€ utils/                 # ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜
â”œâ”€â”€ ğŸ”Œ core/                     # í•µì‹¬ ì‹œìŠ¤í…œ ëª¨ë“ˆ
â”‚   â””â”€â”€ esp32_manager.py       # ESP32 ìë™ê°ì§€/í†µì‹  ê´€ë¦¬ì
â”œâ”€â”€ ğŸ”§ hardware/                 # í•˜ë“œì›¨ì–´ ì œì–´ ëª¨ë“ˆ
â”‚   â”œâ”€â”€ protocol_handler.py    # ESP32 JSON í”„ë¡œí† ì½œ íŒŒì„œ
â”‚   â”œâ”€â”€ serial_scanner.py      # ì‹œë¦¬ì–¼ í¬íŠ¸ ìë™ ê°ì§€
â”‚   â””â”€â”€ barcode_utils.py       # ë°”ì½”ë“œ ìƒì„±/ê²€ì¦ ìœ í‹¸ë¦¬í‹°
â”œâ”€â”€ ğŸ“Š data_sources/             # ë°ì´í„° ì†ŒìŠ¤ ëª¨ë“ˆ
â”‚   â””â”€â”€ google_sheets.py       # Google Sheets API (ì˜¤í”„ë¼ì¸ ì§€ì›)
â”œâ”€â”€ âš™ï¸ config/                   # ì„¤ì • íŒŒì¼
â”‚   â”œâ”€â”€ config.env.template    # í™˜ê²½ ë³€ìˆ˜ í…œí”Œë¦¿
â”‚   â”œâ”€â”€ google_sheets_config.json # Google Sheets ì„¤ì •
â”‚   â””â”€â”€ google_credentials.json   # Google API ì¸ì¦ ì •ë³´
â”œâ”€â”€ ğŸ› ï¸ scripts/                  # ìœ í‹¸ë¦¬í‹° ìŠ¤í¬ë¦½íŠ¸
â”‚   â”œâ”€â”€ create_kiosk_mode.sh   # í‚¤ì˜¤ìŠ¤í¬ ëª¨ë“œ ì„¤ì •
â”‚   â”œâ”€â”€ start_kiosk.sh         # í‚¤ì˜¤ìŠ¤í¬ ì‹œì‘
â”‚   â””â”€â”€ connect_pi.sh          # SSH ì—°ê²°
â”œâ”€â”€ ğŸ§ª tests/                    # í…ŒìŠ¤íŠ¸ íŒŒì¼
â”‚   â”œâ”€â”€ test_esp32_integration.py  # ESP32 í†µí•© í…ŒìŠ¤íŠ¸
â”‚   â””â”€â”€ test_esp32_autodetect.py   # ìë™ ê°ì§€ í…ŒìŠ¤íŠ¸
â”œâ”€â”€ ğŸ“ logs/                     # ë¡œê·¸ íŒŒì¼
â””â”€â”€ ğŸ—‚ï¸ instance/                 # ì¸ìŠ¤í„´ìŠ¤ë³„ ì„¤ì •
```

### ğŸ¯ ì¶”ê°€ëœ í†µí•© íŒŒì¼ë“¤

```
ğŸ“‹ ESP32_INTEGRATION_GUIDE.md    # ESP32 í†µí•© ê°€ì´ë“œ
ğŸ”§ esp32_gym_controller_updated.ino # ESP32 íŒì›¨ì–´ (ë¼ì¦ˆë² ë¦¬íŒŒì´ í˜¸í™˜)
ğŸ§ª test_esp32_integration.py     # ì™„ì „ í†µí•© í…ŒìŠ¤íŠ¸
ğŸ” test_esp32_autodetect.py      # ìë™ ê°ì§€ í…ŒìŠ¤íŠ¸
```

## ğŸ”„ í†µì‹  í”„ë¡œí† ì½œ

### ESP32 â†” ë¼ì¦ˆë² ë¦¬íŒŒì´ USB ì‹œë¦¬ì–¼ í†µì‹ 

**ğŸ” ìë™ í¬íŠ¸ ê°ì§€:**
- ESP32 USB ì¹© ìë™ ì¸ì‹ (CP2102, CH340G, FT232 ë“±)
- VID:PID ê¸°ë°˜ ë§¤ì¹­: `10c4:ea60`, `1a86:7523`, `0403:6001`
- ë™ì  í¬íŠ¸ í• ë‹¹: `/dev/ttyUSB*` (ìë™ ê°ì§€)
- ë¶€íŒ…ì‹œ ìë™ ì—°ê²° ë° ê²€ì¦

**JSON í”„ë¡œí† ì½œ v2.0:**
```json
{
  "device_id": "esp32_gym",
  "message_type": "event|response|command",
  "timestamp": "2025-09-23T15:30:00Z",
  "event_type": "barcode_scanned|sensor_triggered|motor_completed",
  "data": {
    // ì´ë²¤íŠ¸ë³„ ìƒì„¸ ë°ì´í„°
  }
}
```

**í†µì‹  ì„¤ì •:**
- Baudrate: 115200 bps
- Data: 8 bits, Stop: 1 bit, Parity: None
- Timeout: 0.1s (non-blocking)
- Buffer: ìë™ ì´ˆê¸°í™”

#### 1. ë°”ì½”ë“œ ìŠ¤ìº” ì´ë²¤íŠ¸ (ESP32 â†’ ë¼ì¦ˆë² ë¦¬íŒŒì´)
```json
{
  "device_id": "esp32_gym",
  "message_type": "event",
  "event_type": "barcode_scanned",
  "timestamp": "2025-09-23T15:30:00Z",
  "data": {
    "barcode": "1234567890123",
    "scan_type": "barcode",
    "format": "EAN13",
    "quality": 95,
    "scan_count": 15
  }
}
```

#### 2. IR ì„¼ì„œ ì´ë²¤íŠ¸ (ESP32 â†’ ë¼ì¦ˆë² ë¦¬íŒŒì´)
```json
{
  "device_id": "esp32_gym",
  "message_type": "event",
  "event_type": "sensor_triggered",
  "timestamp": "2025-09-23T15:30:01Z",
  "data": {
    "chip_idx": 0,
    "addr": "0x20",
    "pin": 3,
    "raw": "HIGH",
    "active": true
  }
}
```

#### 3. ëª¨í„° ì™„ë£Œ ì´ë²¤íŠ¸ (ESP32 â†’ ë¼ì¦ˆë² ë¦¬íŒŒì´)
```json
{
  "device_id": "esp32_gym",
  "message_type": "event",
  "event_type": "motor_completed",
  "timestamp": "2025-09-23T15:30:05Z",
  "data": {
    "action": "rotate",
    "status": "completed",
    "enabled": true,
    "direction": 1,
    "busy": false,
    "details": {
      "degrees": 330.0,
      "direction": "forward",
      "trigger": "barcode_scan"
    }
  }
}
```

#### 4. ë½ì¹´ ì—´ê¸° ëª…ë ¹ (ë¼ì¦ˆë² ë¦¬íŒŒì´ â†’ ESP32)
```json
{
  "command": "open_locker",
  "locker_id": "A01",
  "duration_ms": 3000
}
```

#### 5. ìƒíƒœ ìš”ì²­ ëª…ë ¹ (ë¼ì¦ˆë² ë¦¬íŒŒì´ â†’ ESP32)
```json
{
  "command": "get_status"
}
```

#### 6. ìë™ ëª¨ë“œ ì„¤ì • ëª…ë ¹ (ë¼ì¦ˆë² ë¦¬íŒŒì´ â†’ ESP32)
```json
{
  "command": "set_auto_mode",
  "enabled": true
}
```

### ğŸ”„ ì‹¤ì‹œê°„ ë°ì´í„° í”Œë¡œìš°

```
[ESP32] ë°”ì½”ë“œ ìŠ¤ìº” 
    â†“ JSON ì´ë²¤íŠ¸
[ë¼ì¦ˆë² ë¦¬íŒŒì´] íŒŒì‹± â†’ íšŒì› ê²€ì¦ â†’ ë½ì¹´ ì„ íƒ UI
    â†“ WebSocket
[ë¸Œë¼ìš°ì €] ì‹¤ì‹œê°„ UI ì—…ë°ì´íŠ¸
    â†“ ì‚¬ìš©ì ë½ì¹´ ì„ íƒ
[ë¼ì¦ˆë² ë¦¬íŒŒì´] JSON ëª…ë ¹ ìƒì„±
    â†“ ì‹œë¦¬ì–¼ í†µì‹ 
[ESP32] ëª¨í„° ì œì–´ â†’ ë½ì¹´ ì—´ê¸° â†’ ì™„ë£Œ ì´ë²¤íŠ¸
    â†“ JSON ì‘ë‹µ
[ë¼ì¦ˆë² ë¦¬íŒŒì´] ìƒíƒœ ì—…ë°ì´íŠ¸ â†’ WebSocket â†’ UI ê°±ì‹ 
```

## ğŸš€ **ì‹œìŠ¤í…œ ì‹œì‘ í”„ë¡œì„¸ìŠ¤**

### ë¶€íŒ… ì‹œí€€ìŠ¤
1. **ë¼ì¦ˆë² ë¦¬íŒŒì´ ë¶€íŒ…** â†’ Raspbian OS ë¡œë“œ
2. **Flask ì•± ì‹œì‘** â†’ `python3 run.py`
3. **ESP32 ìë™ ê°ì§€** â†’ USB í¬íŠ¸ ìŠ¤ìº” ë° ì—°ê²°
4. **WebSocket ì„œë²„ ì‹œì‘** â†’ ì‹¤ì‹œê°„ í†µì‹  ì¤€ë¹„
5. **í‚¤ì˜¤ìŠ¤í¬ ëª¨ë“œ í™œì„±í™”** â†’ í„°ì¹˜ìŠ¤í¬ë¦° UI í‘œì‹œ
6. **Google Sheets ë™ê¸°í™”** â†’ ì˜¤í”„ë¼ì¸ ë°ì´í„° ì¤€ë¹„
7. **ì‹œìŠ¤í…œ ì¤€ë¹„ ì™„ë£Œ** â†’ ì‚¬ìš©ì ì…ë ¥ ëŒ€ê¸°

### ìë™ ë³µêµ¬ ë©”ì»¤ë‹ˆì¦˜
- ESP32 ì—°ê²° ëŠê¹€ ê°ì§€ â†’ ìë™ ì¬ì—°ê²° ì‹œë„ (10ì´ˆ ê°„ê²©)
- Google Sheets ì ‘ê·¼ ì‹¤íŒ¨ â†’ ë¡œì»¬ ìºì‹œ ì‚¬ìš©
- WebSocket ì—°ê²° ëŠê¹€ â†’ ìë™ ì¬ì—°ê²°
- í•˜ë“œì›¨ì–´ ì˜¤ë¥˜ ê°ì§€ â†’ ê´€ë¦¬ì ì•Œë¦¼ ë° ìˆ˜ë™ ëª¨ë“œ ì „í™˜

## ğŸ¯ **í•µì‹¬ ê¸°ëŠ¥ë³„ ìƒì„¸ êµ¬í˜„**

### 1. ESP32 ìë™ ê°ì§€ ì‹œìŠ¤í…œ

```python
# core/esp32_manager.py
async def scan_and_connect_esp32_devices():
    """USB í¬íŠ¸ ìŠ¤ìº”í•˜ì—¬ ESP32 ìë™ ê°ì§€"""
    ports = serial.tools.list_ports.comports()
    
    # ESP32 USB ì¹© ê°ì§€
    esp32_usb_ids = [
        "10c4:ea60",  # CP2102
        "1a86:7523",  # CH340G
        "0403:6001",  # FT232
    ]
    
    for port in ports:
        if any(usb_id in port.hwid.lower() for usb_id in esp32_usb_ids):
            # ESP32 ì—°ê²° ì‹œë„ ë° ê²€ì¦
            device = await connect_and_verify_esp32(port.device)
```

### 2. ì‹¤ì‹œê°„ ì´ë²¤íŠ¸ ì²˜ë¦¬

```python
# app/__init__.py
def setup_esp32_event_handlers(app, esp32_manager):
    async def handle_barcode_scanned(event_data):
        # ë°”ì½”ë“œ â†’ íšŒì› ê²€ì¦ â†’ WebSocket ì „ì†¡
        socketio.emit('barcode_scanned', event_data)
    
    esp32_manager.register_event_handler("barcode_scanned", handle_barcode_scanned)
```

### 3. Google Sheets ì˜¤í”„ë¼ì¸ ë™ê¸°í™”

```python
# data_sources/google_sheets.py  
class GoogleSheetsManager:
    def __init__(self):
        self._members_cache = {}  # ë¡œì»¬ ìºì‹œ
        self._cache_timeout = 300  # 5ë¶„
    
    async def validate_member(self, barcode):
        # ìºì‹œ ìš°ì„  ê²€ìƒ‰ â†’ API í´ë°±
        if self._should_refresh_cache():
            await self._load_members()
        return self._members_cache.get(barcode)
```

## ğŸ“Š **ì„±ëŠ¥ ì§€í‘œ**

| í•­ëª© | ì„±ëŠ¥ | ê°œì„ ì  |
|------|------|--------|
| ë°”ì½”ë“œ ìŠ¤ìº” ì‘ë‹µ | < 100ms | ESP32 ì§ì ‘ ì²˜ë¦¬ |
| íšŒì› ê²€ì¦ | < 50ms | ë¡œì»¬ ìºì‹œ í™œìš© |
| ë½ì¹´ ì—´ê¸° | < 200ms | ëª¨í„° ê°€ì† ì œì–´ |
| UI ì—…ë°ì´íŠ¸ | < 30ms | WebSocket ì‹¤ì‹œê°„ |
| ESP32 ìë™ ì—°ê²° | < 5ì´ˆ | USB VID:PID ë§¤ì¹­ |

## ğŸ”§ **ê°œë°œ ë° í…ŒìŠ¤íŠ¸ ë„êµ¬**

### ê°œë°œ í…ŒìŠ¤íŠ¸
```bash
# ESP32 ìë™ ê°ì§€ í…ŒìŠ¤íŠ¸
python3 test_esp32_autodetect.py

# ì™„ì „ í†µí•© í…ŒìŠ¤íŠ¸
python3 test_esp32_integration.py

# ì›¹ ì„œë²„ ê°œë°œ ëª¨ë“œ
python3 run.py --debug
```

### ë°°í¬ ë° ìš´ì˜
```bash
# í‚¤ì˜¤ìŠ¤í¬ ëª¨ë“œ ì‹œì‘
./scripts/start_kiosk.sh

# ì‹œìŠ¤í…œ ìƒíƒœ í™•ì¸
./scripts/system_status.sh

# Google Sheets ì„¤ì •
python3 config/google_sheets_setup.py
```

## ğŸ”„ **ë²„ì „ íˆìŠ¤í† ë¦¬**

### v2.0 (í˜„ì¬) - ESP32 í†µí•© ì™„ë£Œ
- âœ… ESP32 ìë™ ê°ì§€ ë° ì—°ê²°
- âœ… JSON í”„ë¡œí† ì½œ v2.0 êµ¬í˜„
- âœ… ì‹¤ì‹œê°„ WebSocket í†µì‹ 
- âœ… Google Sheets ì˜¤í”„ë¼ì¸ ìºì‹œ
- âœ… í„°ì¹˜ ìµœì í™” UI (600x1024)
- âœ… ì™„ì „ ìë™í™”ëœ ë°”ì½”ë“œ â†’ ë½ì¹´ ì—´ê¸° í”Œë¡œìš°

### v1.0 - ê¸°ë³¸ ê¸°ëŠ¥
- ê¸°ë³¸ Flask ì›¹ ì„œë²„
- Google Sheets API ì—°ë™
- ë‹¨ìˆœ ë°”ì½”ë“œ ìŠ¤ìº” ì²˜ë¦¬

## ğŸš€ **í–¥í›„ ê°œë°œ ê³„íš**

### Phase 1: ì•ˆì •ì„± í–¥ìƒ
- [ ] ì—ëŸ¬ ë³µêµ¬ ë©”ì»¤ë‹ˆì¦˜ ê°•í™”
- [ ] ë¡œê¹… ì‹œìŠ¤í…œ ê°œì„ 
- [ ] ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§ ëŒ€ì‹œë³´ë“œ

### Phase 2: ê¸°ëŠ¥ í™•ì¥  
- [ ] ë‹¤ì¤‘ ESP32 ì§€ì› (ë½ì¹´ í™•ì¥)
- [ ] íšŒì› ì‚¬ì§„ í‘œì‹œ ê¸°ëŠ¥
- [ ] ìŒì„± ì•ˆë‚´ ì‹œìŠ¤í…œ
- [ ] ê´€ë¦¬ì ì›ê²© ëª¨ë‹ˆí„°ë§

### Phase 3: ê³ ë„í™”
- [ ] AI ê¸°ë°˜ ì‚¬ìš© íŒ¨í„´ ë¶„ì„
- [ ] ëª¨ë°”ì¼ ì•± ì—°ë™
- [ ] í´ë¼ìš°ë“œ ë°±ì—… ì‹œìŠ¤í…œ

---

> **ğŸ“ ë¬¸ì„œ ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸**: 2025ë…„ 9ì›” 23ì¼  
> **ì‹œìŠ¤í…œ ë²„ì „**: v2.0  
> **ESP32 íŒì›¨ì–´**: esp32_gym_controller_updated.ino  
> **ì£¼ìš” ê¸°ëŠ¥**: ì™„ì „ ìë™í™” ESP32 í†µí•© ë½ì¹´í‚¤ ëŒ€ì—¬ ì‹œìŠ¤í…œ
```

---

**ğŸ“‹ ARCHITECTURE.md ì—…ë°ì´íŠ¸ ì™„ë£Œ!**  
ğŸ¯ **ESP32 í†µí•© ì™„ë£Œ ë²„ì „ v2.0 ë°˜ì˜**

> ì´ ë¬¸ì„œëŠ” ìµœì‹  êµ¬í˜„ì‚¬í•­ì„ ë°˜ì˜í•˜ì—¬ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤.  
> ì„¸ë¶€ í™”ë©´ ì„¤ê³„ì™€ êµ¬í˜„ ê°€ì´ë“œëŠ” `ESP32_INTEGRATION_GUIDE.md`ë¥¼ ì°¸ì¡°í•˜ì„¸ìš”.
